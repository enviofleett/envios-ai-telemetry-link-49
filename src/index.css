
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@300;400;600;700&family=Montserrat:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base color system */
    --background: 249 250 251;
    --foreground: 17 24 39;
    --card: 255 255 255;
    --card-foreground: 17 24 39;
    --popover: 255 255 255;
    --popover-foreground: 17 24 39;
    --primary: 59 130 246;
    --primary-foreground: 255 255 255;
    --secondary: 243 244 246;
    --secondary-foreground: 75 85 99;
    --muted: 249 250 251;
    --muted-foreground: 107 114 128;
    --accent: 243 244 246;
    --accent-foreground: 17 24 39;
    --destructive: 239 68 68;
    --destructive-foreground: 255 255 255;
    --success: 34 197 94;
    --success-foreground: 255 255 255;
    --warning: 245 158 11;
    --warning-foreground: 255 255 255;
    --ring: 59 130 246;
    --radius: 0.75rem;

    /* Enhanced Interactive States */
    --primary-hover: 37 99 235;
    --primary-active: 29 78 216;
    --primary-focus: 59 130 246;
    --secondary-hover: 229 231 235;
    --secondary-active: 209 213 219;
    --destructive-hover: 220 38 38;
    --destructive-active: 185 28 28;
    --success-hover: 22 163 74;
    --success-active: 21 128 61;
    --warning-hover: 217 119 6;
    --warning-active: 180 83 9;

    /* Border Color Hierarchy */
    --border-default: 229 231 235;
    --border-strong: 209 213 219;
    --border-light: 243 244 246;
    --border-focus: 59 130 246;
    --border-error: 239 68 68;
    --border-success: 34 197 94;
    --border-warning: 245 158 11;

    /* Typography System */
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;

    --line-height-tight: 1.25;
    --line-height-body: 1.5;
    --line-height-heading: 1.2;
    --line-height-relaxed: 1.75;

    /* Breakpoint System */
    --breakpoint-mobile: 768px;
    --breakpoint-tablet: 1024px;
    --breakpoint-desktop: 1280px;
    --breakpoint-wide: 1536px;

    /* Spacing Scale - Semantic Tokens */
    --spacing-stack-xs: 0.5rem;
    --spacing-stack-sm: 0.75rem;
    --spacing-stack-md: 1rem;
    --spacing-stack-lg: 1.5rem;
    --spacing-stack-xl: 2rem;
    --spacing-inline-xs: 0.5rem;
    --spacing-inline-sm: 0.75rem;
    --spacing-inline-md: 1rem;
    --spacing-inline-lg: 1.5rem;
    --spacing-inline-xl: 2rem;
    --spacing-inset-xs: 0.5rem;
    --spacing-inset-sm: 0.75rem;
    --spacing-inset-md: 1rem;
    --spacing-inset-lg: 1.5rem;
    --spacing-inset-xl: 2rem;

    /* Elevation System */
    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

    /* Extended Chart Colors */
    --chart-1: 59 130 246;
    --chart-2: 16 185 129;
    --chart-3: 245 158 11;
    --chart-4: 239 68 68;
    --chart-5: 139 92 246;
    --chart-6: 6 182 212;
    --chart-7: 236 72 153;
    --chart-8: 34 197 94;
    --chart-9: 251 113 133;
    --chart-10: 168 85 247;

    /* Sidebar System */
    --sidebar-background: 255 255 255;
    --sidebar-foreground: 75 85 99;
    --sidebar-primary: 59 130 246;
    --sidebar-primary-foreground: 255 255 255;
    --sidebar-accent: 243 244 246;
    --sidebar-accent-foreground: 17 24 39;
    --sidebar-border: 229 231 235;
    --sidebar-ring: 59 130 246;

    /* Theme variables for real-time updates */
    --theme-primary: #3b82f6;
    --theme-secondary: #6366f1;
    --theme-background: #ffffff;
    --theme-text: #1f2937;
    --theme-border: #e5e7eb;
    --theme-accent: #2563eb;
    --theme-muted: #6b7280;
    --theme-font-family: 'Inter';
    --theme-font-size: 16px;
    --theme-heading-multiplier: 1.25;
    --theme-line-height: 1.5;
    --theme-card-radius: 8px;
    --theme-container-max-width: 1200px;
    --theme-spacing-scale: 1;
  }

  .dark {
    --background: 9 9 11;
    --foreground: 250 250 250;
    --card: 24 24 27;
    --card-foreground: 250 250 250;
    --popover: 24 24 27;
    --popover-foreground: 250 250 250;
    --primary: 59 130 246;
    --primary-foreground: 255 255 255;
    --secondary: 39 39 42;
    --secondary-foreground: 161 161 170;
    --muted: 24 24 27;
    --muted-foreground: 161 161 170;
    --accent: 39 39 42;
    --accent-foreground: 250 250 250;
    --destructive: 239 68 68;
    --destructive-foreground: 255 255 255;
    --success: 34 197 94;
    --success-foreground: 9 9 11;
    --warning: 245 158 11;
    --warning-foreground: 9 9 11;

    /* Dark mode interactive states */
    --primary-hover: 29 78 216;
    --primary-active: 30 64 175;
    --secondary-hover: 63 63 70;
    --secondary-active: 82 82 91;
    --destructive-hover: 220 38 38;
    --destructive-active: 185 28 28;

    /* Dark mode borders */
    --border-default: 39 39 42;
    --border-strong: 63 63 70;
    --border-light: 24 24 27;
    --border-focus: 59 130 246;

    /* Dark mode shadows */
    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.4);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.4);

    --sidebar-background: 24 24 27;
    --sidebar-foreground: 161 161 170;
    --sidebar-primary: 59 130 246;
    --sidebar-primary-foreground: 255 255 255;
    --sidebar-accent: 39 39 42;
    --sidebar-accent-foreground: 250 250 250;
    --sidebar-border: 39 39 42;
    --sidebar-ring: 59 130 246;

    /* Enhanced dark mode theme variables */
    --theme-primary: #3b82f6;
    --theme-secondary: #6366f1;
    --theme-background: #18181b;
    --theme-text: #fafafa;
    --theme-border: #27272a;
    --theme-accent: #2563eb;
    --theme-muted: #a1a1aa;
  }

  /* Enhanced motion accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    ::before,
    ::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Enhanced smooth transitions for theme switching */
  * {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--theme-font-family, 'Inter'), -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: var(--theme-font-size, 16px);
    line-height: var(--theme-line-height, var(--line-height-body));
    font-weight: var(--font-weight-normal);
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
    font-family: var(--theme-font-family, 'Inter'), -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    line-height: var(--line-height-heading);
    font-weight: var(--font-weight-semibold);
  }

  h1 {
    font-size: calc(var(--theme-font-size, 16px) * var(--theme-heading-multiplier, 1.25) * var(--theme-heading-multiplier, 1.25));
  }

  h2 {
    font-size: calc(var(--theme-font-size, 16px) * var(--theme-heading-multiplier, 1.25));
  }

  h3 {
    font-size: calc(var(--theme-font-size, 16px) * 1.125);
  }

  /* Enhanced focus styles for accessibility */
  *:focus-visible {
    outline: 2px solid hsl(var(--border-focus));
    outline-offset: 2px;
    border-radius: 2px;
  }

  /* Remove focus styles for mouse users */
  *:focus:not(:focus-visible) {
    outline: none;
  }
}

@layer components {
  /* Enhanced Page Container System */
  .page-container {
    max-width: var(--theme-container-max-width, 1400px);
    @apply mx-auto px-6 py-6;
  }

  .page-container-text {
    max-width: 70ch;
    @apply mx-auto px-6 py-6;
  }

  /* Enhanced Dashboard Card System */
  .dashboard-card {
    @apply bg-card text-card-foreground rounded-xl border border-border;
    box-shadow: var(--shadow-sm);
    border-radius: var(--theme-card-radius, 8px);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
  }

  .dashboard-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
  }

  .dashboard-card-header {
    @apply p-6 border-b;
    border-color: hsl(var(--border-default));
    padding: var(--spacing-inset-lg);
  }

  .dashboard-card-content {
    @apply p-6;
    padding: var(--spacing-inset-lg);
  }

  /* Enhanced Metric Card System */
  .metric-card {
    @apply bg-card text-card-foreground rounded-xl border p-6;
    border-color: hsl(var(--border-default));
    box-shadow: var(--shadow-sm);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
  }

  .metric-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
  }

  .metric-value {
    @apply text-3xl text-foreground;
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }

  .metric-label {
    @apply text-sm mt-1;
    color: hsl(var(--muted-foreground));
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-body);
  }

  .metric-change {
    @apply text-xs mt-2;
    font-weight: var(--font-weight-medium);
  }

  .metric-change.positive {
    color: hsl(var(--success));
  }

  .metric-change.negative {
    color: hsl(var(--destructive));
  }

  /* Enhanced Status Badge System */
  .status-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    font-weight: var(--font-weight-medium);
    gap: var(--spacing-inline-xs);
  }

  .status-badge .icon {
    @apply w-3 h-3;
  }

  .status-online {
    background-color: hsl(var(--success) / 0.1);
    color: hsl(var(--success));
    border: 1px solid hsl(var(--success) / 0.2);
  }

  .status-offline {
    @apply bg-muted;
    color: hsl(var(--muted-foreground));
    border: 1px solid hsl(var(--border-default));
  }

  .status-warning {
    background-color: hsl(var(--warning) / 0.1);
    color: hsl(var(--warning));
    border: 1px solid hsl(var(--warning) / 0.2);
  }

  .status-error {
    background-color: hsl(var(--destructive) / 0.1);
    color: hsl(var(--destructive));
    border: 1px solid hsl(var(--destructive) / 0.2);
  }

  /* Enhanced Sidebar Navigation */
  .sidebar-nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-lg font-medium transition-all duration-200;
    font-weight: var(--font-weight-medium);
  }

  .sidebar-nav-item.active {
    @apply bg-sidebar-accent text-sidebar-accent-foreground;
    border-right: 2px solid hsl(var(--sidebar-primary));
    font-weight: var(--font-weight-semibold);
  }

  .sidebar-nav-item:not(.active) {
    color: hsl(var(--sidebar-foreground));
  }

  .sidebar-nav-item:not(.active):hover {
    @apply bg-sidebar-accent text-sidebar-accent-foreground;
  }

  .sidebar-nav-item:focus-visible {
    outline: 2px solid hsl(var(--sidebar-ring));
    outline-offset: 2px;
  }

  /* Enhanced Chart Container */
  .chart-container {
    @apply bg-card text-card-foreground rounded-xl border p-6;
    border-color: hsl(var(--border-default));
    box-shadow: var(--shadow-sm);
  }

  /* Enhanced Data Table */
  .data-table {
    @apply bg-card text-card-foreground rounded-xl border overflow-hidden;
    border-color: hsl(var(--border-default));
    box-shadow: var(--shadow-sm);
  }

  .data-table-header {
    @apply bg-muted px-6 py-4 border-b;
    border-color: hsl(var(--border-default));
    font-weight: var(--font-weight-semibold);
  }

  .data-table-row {
    @apply px-6 py-4 border-b transition-colors duration-150;
    border-color: hsl(var(--border-light));
  }

  .data-table-row:hover {
    background-color: hsl(var(--muted) / 0.5);
  }

  .data-table-row:nth-child(even) {
    background-color: hsl(var(--muted) / 0.3);
  }

  /* Enhanced Button System */
  .button-primary {
    @apply font-medium px-4 py-2 rounded-lg transition-all duration-200;
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    font-weight: var(--font-weight-medium);
  }

  .button-primary:hover:not(:disabled) {
    background-color: hsl(var(--primary-hover));
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .button-primary:active:not(:disabled) {
    background-color: hsl(var(--primary-active));
    transform: translateY(0);
  }

  .button-primary:focus-visible {
    outline: 2px solid hsl(var(--border-focus));
    outline-offset: 2px;
  }

  .button-primary:disabled {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
  }

  .button-primary.loading {
    position: relative;
    color: transparent;
  }

  .button-primary.loading::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    top: 50%;
    left: 50%;
    margin-left: -8px;
    margin-top: -8px;
    border: 2px solid hsl(var(--primary-foreground));
    border-radius: 50%;
    border-top-color: transparent;
    animation: button-spin 1s ease-in-out infinite;
  }

  .button-secondary {
    @apply font-medium px-4 py-2 rounded-lg transition-all duration-200;
    background-color: hsl(var(--secondary));
    color: hsl(var(--secondary-foreground));
    font-weight: var(--font-weight-medium);
  }

  .button-secondary:hover:not(:disabled) {
    background-color: hsl(var(--secondary-hover));
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .button-secondary:active:not(:disabled) {
    background-color: hsl(var(--secondary-active));
    transform: translateY(0);
  }

  .button-secondary:focus-visible {
    outline: 2px solid hsl(var(--border-focus));
    outline-offset: 2px;
  }

  .button-secondary:disabled {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
  }

  /* Enhanced Input Field */
  .input-field {
    @apply w-full px-3 py-2 rounded-lg transition-all duration-200;
    border: 1px solid hsl(var(--border-default));
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-weight: var(--font-weight-normal);
  }

  .input-field:focus {
    border-color: hsl(var(--border-focus));
    outline: none;
    box-shadow: 0 0 0 3px hsl(var(--border-focus) / 0.1);
  }

  .input-field:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: hsl(var(--muted));
  }

  .input-field.error {
    border-color: hsl(var(--border-error));
  }

  .input-field.success {
    border-color: hsl(var(--border-success));
  }
}

/* Enhanced Grid System Utilities */
@layer utilities {
  .grid-cols-2 {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .grid-cols-3 {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .grid-cols-4 {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .grid-cols-5 {
    display: grid;
    grid-template-columns: repeat(5, minmax(0, 1fr));
  }

  .grid-cols-6 {
    display: grid;
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }

  .grid-gap-xs {
    gap: var(--spacing-stack-xs);
  }

  .grid-gap-sm {
    gap: var(--spacing-stack-sm);
  }

  .grid-gap-md {
    gap: var(--spacing-stack-md);
  }

  .grid-gap-lg {
    gap: var(--spacing-stack-lg);
  }

  .grid-gap-xl {
    gap: var(--spacing-stack-xl);
  }

  /* Typography Utilities */
  .text-uppercase {
    text-transform: uppercase;
  }

  .text-lowercase {
    text-transform: lowercase;
  }

  .text-capitalize {
    text-transform: capitalize;
  }

  .font-light {
    font-weight: var(--font-weight-light);
  }

  .font-normal {
    font-weight: var(--font-weight-normal);
  }

  .font-medium {
    font-weight: var(--font-weight-medium);
  }

  .font-semibold {
    font-weight: var(--font-weight-semibold);
  }

  .font-bold {
    font-weight: var(--font-weight-bold);
  }

  .font-extrabold {
    font-weight: var(--font-weight-extrabold);
  }

  .leading-tight {
    line-height: var(--line-height-tight);
  }

  .leading-body {
    line-height: var(--line-height-body);
  }

  .leading-heading {
    line-height: var(--line-height-heading);
  }

  .leading-relaxed {
    line-height: var(--line-height-relaxed);
  }

  /* Responsive Grid Utilities */
  @media (max-width: 768px) {
    .grid-cols-mobile-1 {
      grid-template-columns: repeat(1, minmax(0, 1fr));
    }

    .grid-cols-mobile-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .grid-cols-tablet-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .grid-cols-tablet-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
  }

  @media (min-width: 1025px) {
    .grid-cols-desktop-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .grid-cols-desktop-4 {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }

    .grid-cols-desktop-5 {
      grid-template-columns: repeat(5, minmax(0, 1fr));
    }
  }
}

/* Fleet-specific styles matching the reference design */
@layer components {
  .fleet-dashboard-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4;
    gap: var(--spacing-stack-lg);
  }

  .system-health-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4;
    gap: var(--spacing-stack-md);
  }

  .health-status-card {
    @apply bg-card text-card-foreground rounded-lg border p-4 flex items-center justify-between;
    border-color: hsl(var(--border-default));
    transition: all 0.2s ease;
  }

  .health-status-card.connected {
    border-color: hsl(var(--success) / 0.3);
    background-color: hsl(var(--success) / 0.05);
  }

  .health-status-card.degraded {
    border-color: hsl(var(--warning) / 0.3);
    background-color: hsl(var(--warning) / 0.05);
  }

  .health-status-card.offline {
    border-color: hsl(var(--destructive) / 0.3);
    background-color: hsl(var(--destructive) / 0.05);
  }

  .performance-chart {
    @apply bg-card text-card-foreground rounded-xl border p-6 mt-6;
    border-color: hsl(var(--border-default));
    box-shadow: var(--shadow-sm);
  }

  .user-distribution-chart {
    @apply bg-card text-card-foreground rounded-xl border p-6;
    border-color: hsl(var(--border-default));
    box-shadow: var(--shadow-sm);
  }

  .alert-item {
    @apply flex items-start gap-3 p-3 rounded-lg transition-colors duration-150;
    gap: var(--spacing-inline-sm);
    padding: var(--spacing-inset-sm);
  }

  .alert-item:hover {
    background-color: hsl(var(--muted) / 0.5);
  }

  .alert-item .alert-dot {
    @apply w-2 h-2 rounded-full mt-2 flex-shrink-0;
  }

  .alert-item .alert-dot.critical {
    background-color: hsl(var(--destructive));
  }

  .alert-item .alert-dot.warning {
    background-color: hsl(var(--warning));
  }

  .alert-item .alert-dot.info {
    background-color: hsl(var(--primary));
  }
}

/* Enhanced Animation System */
@keyframes button-spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-green {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

.animate-pulse-green {
  animation: pulse-green 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Loading states */
.loading-shimmer {
  background: linear-gradient(90deg, hsl(var(--muted)) 25%, hsl(var(--muted-foreground)) 50%, hsl(var(--muted)) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .fleet-dashboard-grid {
    @apply grid-cols-1;
  }

  .system-health-grid {
    @apply grid-cols-1;
  }

  .page-container {
    @apply px-4;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .dashboard-card {
    border-width: 2px;
  }

  .button-primary,
  .button-secondary {
    border: 2px solid currentColor;
  }

  .input-field {
    border-width: 2px;
  }
}

/* Print styles */
@media print {
  .sidebar,
  .sidebar-nav-item,
  .button-primary,
  .button-secondary {
    display: none !important;
  }

  .dashboard-card {
    box-shadow: none;
    border: 1px solid #000;
  }

  .page-container {
    max-width: none;
    padding: 0;
  }
}
